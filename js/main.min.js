const apiUrl="https://mp3quran.net/api/v3/",lang="ar";async function getReciters(){const e=await fetch(`${apiUrl}reciters`),t=await e.json(),n=document.querySelector("#chooseReciters");n.innerHTML="<option>أختر قارئ</option>",t.reciters.forEach((e=>{n.innerHTML+=`<option value="${e.id}">${e.name}</option>`})),n.addEventListener("change",(e=>getMoshef(e.target.value)))}async function getMoshef(e){const t=await fetch(` ${apiUrl}reciters?language=${lang}&reciter=${e}`),n=await t.json(),o=document.querySelector("#chooseMoshef");o.innerHTML="<option disabled selected>أختر مصحف</option>";n.reciters[0].moshaf.forEach((e=>{o.innerHTML+=`<option value="${e.id}" data-server=${e.server} sura-list=${e.surah_list}>${e.name}</option>`})),o.addEventListener("change",(e=>{var t=o.options[o.selectedIndex];getSura(t.getAttribute("data-server"),t.getAttribute("sura-list"))}))}async function getSura(e,t){const n=await fetch(` ${apiUrl}suwar?language=${lang}`),o=await n.json(),a=document.querySelector("#chooseSura");a.innerHTML="<option>أختر سورة</option>";const c=o.suwar;(t=t.split(",")).forEach((t=>{const n=t.padStart(3,"0");c.forEach((o=>{o.id==t&&(a.innerHTML+=`<option value="${e}${n}.mp3">${o.name}</option>`)}))})),a.addEventListener("change",getSelectedSura)}function getSelectedSura(){const e=document.querySelector("#chooseSura"),t=e.options[e.selectedIndex],n=document.querySelector(".audio audio");n.src=t.value,console.log(n.src);document.querySelector(".down").style.display="block"}async function playLive(e){if(Hls.isSupported()){var t=document.getElementById("video"),n=new Hls;n.loadSource(e),n.attachMedia(t),n.on(Hls.Events.MANIFEST_PARSED,(function(){t.play()}))}}async function getKindZekr(){const e=document.getElementById("chooseKindZekr");e.addEventListener("change",(function(){"أذكار الصباح"===e.options[e.selectedIndex].value?getNumofZekrSubah():getNumofZekrMasa()}))}async function getNumofZekrSubah(){const e=await fetch("https://ahegazy.github.io/muslimKit/json/azkar_sabah.json"),t=await e.json(),n=document.querySelector("#chooseNumZekr");n.innerHTML="<option disabled selected> أختر رقم الذكر </option>",t.content.forEach(((e,t)=>{n.innerHTML+=`<option id=${t}>ذكر رقم ${t+1}</option>`}))}async function getNumofZekrMasa(){const e=await fetch("https://ahegazy.github.io/muslimKit/json/azkar_massa.json"),t=await e.json(),n=document.querySelector("#chooseNumZekr");n.innerHTML="<option disabled selected> أختر رقم الذكر </option>",t.content.forEach(((e,t)=>{n.innerHTML+=`<option id=${t}>ذكر رقم ${t+1}</option>`}))}async function printzkrSubah(e){const t=await fetch("https://ahegazy.github.io/muslimKit/json/azkar_sabah.json"),n=await t.json(),o=document.querySelector(".container2 p"),a=document.querySelector(".container2 .p2"),c=document.querySelector("#Azkar .container2");c.style.display="flex",c.style.flexDirection="column",c.style.alignItems="center",o.innerHTML=n.content[e].zekr,a.innerHTML=n.content[e].bless;const i=document.querySelector(".counter");i.innerHTML=` العدد المطلوب ${n.content[e].repeat}`;const r=document.querySelector(".counter2");document.querySelector("#plus").style.display="block",r.style.display="block",i.style.display="block"}async function printzkrmassa(e){const t=await fetch("https://ahegazy.github.io/muslimKit/json/azkar_massa.json"),n=await t.json();console.log(n);const o=document.querySelector(".container2 p"),a=document.querySelector(".container2 .p2"),c=document.querySelector("#Azkar .container2");c.style.display="flex",c.style.flexDirection="column",c.style.alignItems="center",o.innerHTML=n.content[e].zekr,a.innerHTML=n.content[e].bless;const i=document.querySelector(".counter");i.innerHTML=` العدد المطلوب ${n.content[e].repeat}`;const r=document.querySelector(".counter2");document.querySelector("#plus").style.display="block",r.style.display="block",i.style.display="block"}getReciters(),chooseNumZekr.addEventListener("change",(function(){const e=document.querySelector("#chooseNumZekr"),t=e.options[e.selectedIndex].getAttribute("id"),n=document.getElementById("chooseKindZekr");if("أذكار الصباح"===n.options[n.selectedIndex].value){printzkrSubah(t);document.querySelector(".counter2").firstChild.textContent=""}else{printzkrmassa(t);document.querySelector(".counter2").firstChild.textContent=""}})),getKindZekr();let moonIcon=document.querySelectorAll(".fa-moon");moonIcon.forEach(((e,t)=>{e.addEventListener("click",(function(){if(0==t){const t=document.querySelector(".container2");t.classList.toggle("dark"),t.classList.toggle("white"),e.classList.toggle("fa-solid")}else{const t=document.querySelector(".container4");t.classList.toggle("dark"),t.classList.toggle("white"),e.classList.toggle("fa-solid")}}))}));const plus=document.querySelector("#plus");plus.addEventListener("click",(function(){document.querySelector(".counter2").firstChild.textContent++}));const cities=["Cairo","Alexandria","Giza","Shubra El Kheima","Port Said","Suez","Luxor","Asyut","Mansoura","Tanta","Ismailia","Faiyum","Zagazig","Damietta","Aswan","Minya","Beni Suef","Hurghada","Sohag","Qena"],citiesArabic=["القاهرة","الإسكندرية","الجيزة","شبرا الخيمة","بورسعيد","السويس","الأقصر","أسيوط","المنصورة","طنطا","الإسماعيلية","الفيوم","الزقازيق","دمياط","أسوان","المنيا","بني سويف","الغردقة","سوهاج","قنا"];let titletext;function createSpans(e,t){const n=document.querySelector(".container3");let o=document.createElement("span");o.innerHTML=`${t} : ${e}`,o.style.cssText="display:block;margin-left:25px",n.appendChild(o)}cities.forEach(((e,t)=>{citiesArabic.forEach(((n,o)=>{t===o&&(chooseCity.innerHTML+=`<option value=${e}>${n}</option>`)}))})),chooseCity.addEventListener("change",(async function(){var e=document.querySelector("#chooseCity"),t=e.options[e.selectedIndex].value;const n=await fetch(`https://api.aladhan.com/v1/timingsByCity/09-09-2024?city=${t}&country=egypt&method=8`),o=await n.json(),a=document.querySelector(".container3");a.style.display="block";const c=o.data.date.readable;titletext=c;const i=Object.values(o.data.timings);""!==a.innerHTML&&(a.innerHTML=""),i.forEach(((e,t)=>{prayers.forEach(((n,o)=>{t===o&&createSpans(e,n)}))}))}));const prayers=["الفجر","شروق الشمس","الظهر","العصر","غروب الشمس","المغرب","العشاء"],apiSuraText="https://api.alquran.cloud/v1/surah/";async function getSuraName(){const e=await fetch(` ${apiUrl}suwar?language=${lang}`),t=await e.json(),n=document.querySelector("#nameSura");n.innerHTML=' <option value="" disabled selected>  أختر </option>',t.suwar.forEach(((e,t)=>{n.innerHTML+=`<option value=${t+1}>${e.name}</option>`}))}nameSura.addEventListener("change",(async function(){const e=document.querySelector("#nameSura"),t=e.options[e.selectedIndex].value,n=await fetch(`${apiSuraText}${t}`),o=await n.json(),a=document.querySelector(".container4");""!==a.innerHTML&&(a.innerHTML="");document.querySelector("#SuraText .fa-moon").style.display="block";let c=1;a.style.display="block",o.data.ayahs.forEach(((e,t)=>{a.innerHTML+=`${e.text}(${c})`,console.log(e.text),c++}))})),getSuraName();let iconToogle=document.getElementById("toggole");const ul=document.querySelector("ul");async function AsmaaAllah(){let e;const t=document.querySelector("#AsmaaGod .container");for(t.style.width="90%",t.style.fontSize="30px",e=1;e<=77;e++){const n=await fetch(`https://api.aladhan.com/v1/asmaAlHusna/${e}`),o=await n.json(),a=document.createElement("span");a.style.cssText="color:white;margin:5px";let c=",";77===e&&(c=".");const i=document.createTextNode(`${o.data[0].name} ${c}`);a.appendChild(i),t.appendChild(a)}}function downloadBlob(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),n.remove()}function downloadResource(e){filename=e.split("\\").pop().split("/").pop(),fetch(e,{mode:"no-cors"}).then((e=>e.blob())).then((e=>{downloadBlob(window.URL.createObjectURL(e),filename)})).catch((e=>console.error(e)))}iconToogle.addEventListener("click",(function(){ul.classList.toggle("ul")})),AsmaaAllah();